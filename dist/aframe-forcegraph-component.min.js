!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){if("undefined"==typeof AFRAME)throw new Error("Component attempted to register before AFRAME was available.");var o={graph:n(47),forcelayout:n(13),forcelayout3d:n(25)},r=n(51);AFRAME.registerComponent("forcegraph",{schema:{jsonUrl:{type:"string"},nodes:{parse:JSON.parse,default:"[]"},links:{parse:JSON.parse,default:"[]"},numDimensions:{type:"number",default:3},nodeRelSize:{type:"number",default:4},lineOpacity:{type:"number",default:.2},autoColorBy:{type:"string"},idField:{type:"string",default:"id"},valField:{type:"string",default:"val"},nameField:{type:"string",default:"name"},colorField:{type:"string",default:"color"},linkSourceField:{type:"string",default:"source"},linkTargetField:{type:"string",default:"target"},warmupTicks:{type:"int",default:0},cooldownTicks:{type:"int",default:1/0},cooldownTime:{type:"int",default:15e3}},init:function(){this.state={},this.state.tooltipEl=document.createElement("a-text"),document.querySelector("a-entity[camera], a-camera").appendChild(this.state.tooltipEl),this.state.tooltipEl.setAttribute("position","0 -0.5 -1"),this.state.tooltipEl.setAttribute("width",2),this.state.tooltipEl.setAttribute("align","center"),this.state.tooltipEl.setAttribute("color","lavender"),this.state.tooltipEl.setAttribute("value",""),this.cameraObj=document.querySelector("[camera], a-camera").object3D.children.filter(function(t){return"PerspectiveCamera"===t.type})[0]},remove:function(){this.state.tooltipEl.remove()},update:function(t){function e(){(d++>s.cooldownTicks||new Date-h>s.cooldownTime)&&(this.state.onFrame=null),p.step(),s.nodes.forEach(function(t){var e=t.__sphere,n=p.getNodePosition(t[s.idField]);e.position.x=n.x,e.position.y=n.y||0,e.position.z=n.z||0}),s.links.forEach(function(t){var e=t.__line,n=p.getLinkPosition(c.getLink(t.source,t.target).id);e.geometry.vertices=[new THREE.Vector3(n.from.x,n.from.y||0,n.from.z||0),new THREE.Vector3(n.to.x,n.to.y||0,n.to.z||0)],e.geometry.verticesNeedUpdate=!0,e.geometry.computeBoundingSphere()})}function n(t,e,n){if(e){var o=["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],r=t.filter(function(t){return!t[n]}),i={};r.forEach(function(t){i[t[e]]=null}),Object.keys(i).forEach(function(t,e){i[t]=e}),r.forEach(function(t){t[n]=parseInt(o[i[t[e]]%o.length].slice(1),16)})}}var i=this,s=this.data,a=AFRAME.utils.diff(s,t);this.state.onFrame=null,"jsonUrl"in a&&s.jsonUrl&&r.get(s.jsonUrl).then(function(t,e){s.nodes=e.nodes,s.links=e.links,i.update(s)}),n(s.nodes,s.autoColorBy,s.colorField),s.links.forEach(function(t){t.source=t[s.linkSourceField],t.target=t[s.linkTargetField],t.id=[t.source,t.target].join(" > ")});for(var u=this.el.object3D;u.children.length;)u.remove(u.children[0]);s.nodes.forEach(function(t){var e=new THREE.MeshLambertMaterial({color:t[s.colorField]||16777130,transparent:!0});e.opacity=.75;var n=new THREE.Mesh(new THREE.SphereGeometry(Math.cbrt(t[s.valField]||1)*s.nodeRelSize,8,8),e);n.name=t[s.nameField],u.add(t.__sphere=n)});var f=new THREE.LineBasicMaterial({color:15790320,transparent:!0});f.opacity=s.lineOpacity,s.links.forEach(function(t){var e=new THREE.Line(new THREE.Geometry,f);e.geometry.vertices=[new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,0)],u.add(t.__line=e)});var c=o.graph();s.nodes.forEach(function(t){c.addNode(t[s.idField])}),s.links.forEach(function(t){c.addLink(t.source,t.target)});for(var p=o["forcelayout"+(2===s.numDimensions?"":"3d")](c),l=0;l<s.warmupTicks;l++)p.step();var d=0,h=new Date;this.state.onFrame=e},tick:function(t,e){var n=new THREE.Raycaster;n.setFromCamera(new THREE.Vector2(0,0),this.cameraObj);var o=n.intersectObjects(this.el.object3D.children).filter(function(t){return t.object.name});this.state.tooltipEl.setAttribute("value",o.length?o[0].object.name:""),this.state.onFrame&&this.state.onFrame()}})},function(t,e){function n(t,e){var o;if(t||(t={}),e)for(o in e)if(e.hasOwnProperty(o)){var r=t.hasOwnProperty(o),i=typeof e[o],s=!r||typeof t[o]!==i;s?t[o]=e[o]:"object"===i&&(t[o]=n(t[o],e[o]))}return t}t.exports=n},function(t,e){function n(t){var e="number"==typeof t?t:+new Date,n=function(){return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,e=4294967295&(3042594569^e^e>>>16),(268435455&e)/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}function o(t,e){var o=e||n();if("function"!=typeof o.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var n,r,i;for(n=t.length-1;n>0;--n)r=o.next(n+1),i=t[r],t[r]=t[n],t[n]=i,e(i);t.length&&e(t[0])},shuffle:function(){var e,n,r;for(e=t.length-1;e>0;--e)n=o.next(e+1),r=t[n],t[n]=t[e],t[e]=r;return t}}}t.exports={random:n,randomIterator:o}},function(t,e){function n(t,e,n){var r="[object Array]"===Object.prototype.toString.call(n);if(r)for(var i=0;i<n.length;++i)o(t,e,n[i]);else for(var s in t)o(t,e,s)}function o(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(o){return void 0!==o?(t[n]=o,e):t[n]}}}t.exports=n},function(t,e){function n(t,e,n){var r="[object Array]"===Object.prototype.toString.call(n);if(r)for(var i=0;i<n.length;++i)o(t,e,n[i]);else for(var s in t)o(t,e,s)}function o(t,e,n){if(t.hasOwnProperty(n)){if("function"==typeof e[n])return;e[n]=function(o){return void 0!==o?(t[n]=o,e):t[n]}}}t.exports=n},function(t,e){function n(t,e){var o;if(t||(t={}),e)for(o in e)if(e.hasOwnProperty(o)){var r=t.hasOwnProperty(o),i=typeof e[o],s=!r||typeof t[o]!==i;s?t[o]=e[o]:"object"===i&&(t[o]=n(t[o],e[o]))}return t}t.exports=n},function(t,e){function n(t){var e="number"==typeof t?t:+new Date,n=function(){return e=e+2127912214+(e<<12)&4294967295,e=4294967295&(3345072700^e^e>>>19),e=e+374761393+(e<<5)&4294967295,e=4294967295&(e+3550635116^e<<9),e=e+4251993797+(e<<3)&4294967295,e=4294967295&(3042594569^e^e>>>16),(268435455&e)/268435456};return{next:function(t){return Math.floor(n()*t)},nextDouble:function(){return n()}}}function o(t,e){var o=e||n();if("function"!=typeof o.next)throw new Error("customRandom does not match expected API: next() function is missing");return{forEach:function(e){var n,r,i;for(n=t.length-1;n>0;--n)r=o.next(n+1),i=t[r],t[r]=t[n],t[n]=i,e(i);t.length&&e(t[0])},shuffle:function(){var e,n,r;for(e=t.length-1;e>0;--e)n=o.next(e+1),r=t[n],t[n]=t[e],t[e]=r;return t}}}t.exports={random:n,randomIterator:o}},function(t,e){function n(t){var e=Object.create(null);return{on:function(n,o,r){if("function"!=typeof o)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:o,ctx:r}),t},off:function(n,o){var r="undefined"==typeof n;if(r)return e=Object.create(null),t;if(e[n]){var i="function"!=typeof o;if(i)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===o&&s.splice(a,1)}return t},fire:function(n){var o=e[n];if(!o)return t;var r;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var s=o[i];s.callback.apply(s.ctx,r)}return t}}}function o(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}t.exports=function(t){o(t);var e=n(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},function(t,e,n){function o(t){function e(){var t,e=d.length;if(e)for(y.insertBodies(d);e--;)t=d[e],t.isPinned||(t.force.reset(),y.updateBodyForce(t),g.update(t));for(e=h.length;e--;)m.update(h[e])}var o=n(18),r=n(4),i=n(5),s=n(7);t=i(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20});var a=t.createQuadTree||n(21),u=t.createBounds||n(14),f=t.createDragForce||n(16),c=t.createSpringForce||n(19),p=t.integrator||n(17),l=t.createBody||n(15),d=[],h=[],y=a(t),v=u(d,t),m=c(t),g=f(t),x=0,b={bodies:d,quadTree:y,springs:h,settings:t,step:function(){e();var n=p(d,t.timeStep);return v.update(),n},addBody:function(t){if(!t)throw new Error("Body is required");return d.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=l(t);return d.push(e),e},removeBody:function(t){if(t){var e=d.indexOf(t);if(!(e<0))return d.splice(e,1),0===d.length&&v.reset(),!0}},addSpring:function(t,e,n,r,i){if(!t||!e)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var s=new o(t,e,n,i>=0?i:-1,r);return h.push(s),s},getTotalMovement:function(){return x},removeSpring:function(t){if(t){var e=h.indexOf(t);return e>-1?(h.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return v.getBestNewPosition(t)},getBBox:function(){return v.box},gravity:function(e){return void 0!==e?(t.gravity=e,y.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,y.options({theta:e}),this):t.theta}};return r(t,b),s(b),b}t.exports=o},function(t,e){function n(t){var e=Object.create(null);return{on:function(n,o,r){if("function"!=typeof o)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:o,ctx:r}),t},off:function(n,o){var r="undefined"==typeof n;if(r)return e=Object.create(null),t;if(e[n]){var i="function"!=typeof o;if(i)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===o&&s.splice(a,1)}return t},fire:function(n){var o=e[n];if(!o)return t;var r;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var s=o[i];s.callback.apply(s.ctx,r)}return t}}}function o(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}t.exports=function(t){o(t);var e=n(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},function(t,e,n){function o(t){function e(){var t,e=d.length;if(e)for(y.insertBodies(d);e--;)t=d[e],t.isPinned||(t.force.reset(),y.updateBodyForce(t),g.update(t));for(e=h.length;e--;)m.update(h[e])}var o=n(37),r=n(3),i=n(1),s=n(9);t=i(t,{springLength:30,springCoeff:8e-4,gravity:-1.2,theta:.8,dragCoeff:.02,timeStep:20,stableThreshold:.009});var a=t.createQuadTree||n(39),u=t.createBounds||n(33),f=t.createDragForce||n(35),c=t.createSpringForce||n(38),p=t.integrator||n(36),l=t.createBody||n(34),d=[],h=[],y=a(t),v=u(d,t),m=c(t),g=f(t),x=0,b=!1,w={bodies:d,springs:h,settings:t,step:function(){e(),x=p(d,t.timeStep),v.update();var n=x<t.stableThreshold;return b!==n&&w.fire("stable",n),b=n,n},addBody:function(t){if(!t)throw new Error("Body is required");return d.push(t),t},addBodyAt:function(t){if(!t)throw new Error("Body position is required");var e=l(t);return d.push(e),e},removeBody:function(t){if(t){var e=d.indexOf(t);if(!(e<0))return d.splice(e,1),0===d.length&&v.reset(),!0}},addSpring:function(t,e,n,r,i){if(!t||!e)throw new Error("Cannot add null spring to force simulator");"number"!=typeof n&&(n=-1);var s=new o(t,e,n,i>=0?i:-1,r);return h.push(s),s},getTotalMovement:function(){return x},removeSpring:function(t){if(t){var e=h.indexOf(t);return e>-1?(h.splice(e,1),!0):void 0}},getBestNewBodyPosition:function(t){return v.getBestNewPosition(t)},getBBox:function(){return v.box},gravity:function(e){return void 0!==e?(t.gravity=e,y.options({gravity:e}),this):t.gravity},theta:function(e){return void 0!==e?(t.theta=e,y.options({theta:e}),this):t.theta}};return r(t,w),s(w),w}t.exports=o},function(t,e){function n(t,e){this.pos=new o(t,e),this.prevPos=new o(t,e),this.force=new o,this.velocity=new o,this.mass=1}function o(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function r(t,e,n){this.pos=new i(t,e,n),this.prevPos=new i(t,e,n),this.force=new i,this.velocity=new i,this.mass=1}function i(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}t.exports={Body:n,Vector2d:o,Body3d:r,Vector3d:i},n.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},o.prototype.reset=function(){this.x=this.y=0},r.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},i.prototype.reset=function(){this.x=this.y=this.z=0}},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(t){if(c===setTimeout)return setTimeout(t,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(t,0);try{return c(t,0)}catch(e){try{return c.call(null,t,0)}catch(e){return c.call(this,t,0)}}}function i(t){if(p===clearTimeout)return clearTimeout(t);if((p===o||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function s(){y&&d&&(y=!1,d.length?h=d.concat(h):v=-1,h.length&&a())}function a(){if(!y){var t=r(s);y=!0;for(var e=h.length;e;){for(d=h,h=[];++v<e;)d&&d[v].run();v=-1,e=h.length}d=null,y=!1,i(t)}}function u(t,e){this.fun=t,this.array=e}function f(){}var c,p,l=t.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(t){c=n}try{p="function"==typeof clearTimeout?clearTimeout:o}catch(t){p=o}}();var d,h=[],y=!1,v=-1;l.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new u(t,e)),1!==h.length||y||r(a)},u.prototype.run=function(){this.fun.apply(null,this.array)},l.title="browser",l.browser=!0,l.env={},l.argv=[],l.version="",l.versions={},l.on=f,l.addListener=f,l.once=f,l.off=f,l.removeListener=f,l.removeAllListeners=f,l.emit=f,l.prependListener=f,l.prependOnceListener=f,l.listeners=function(t){return[]},l.binding=function(t){throw new Error("process.binding is not supported")},l.cwd=function(){return"/"},l.chdir=function(t){throw new Error("process.chdir is not supported")},l.umask=function(){return 0}},function(t,e,n){function o(t,e){function o(t){Object.keys(E).forEach(function(e){t(E[e],e)})}function s(e,n){var o;if(void 0===n)o="object"!=typeof e?e:e.id;else{var r=t.hasLink(e,n);if(!r)return;o=r.id}return T[o]}function a(t){return E[t]}function u(){t.on("changed",c)}function f(t){I.fire("stable",t)}function c(e){for(var n=0;n<e.length;++n){var o=e[n];"add"===o.changeType?(o.node&&l(o.node.id),o.link&&h(o.link)):"remove"===o.changeType&&(o.node&&d(o.node),o.link&&y(o.link))}k=t.getNodesCount()}function p(){k=0,t.forEachNode(function(t){l(t.id),k+=1}),t.forEachLink(h)}function l(e){var n=E[e];if(!n){var o=t.getNode(e);if(!o)throw new Error("initBody() was called with unknown node id");var r=o.position;if(!r){var i=v(o);r=q.getBestNewBodyPosition(i)}n=q.addBodyAt(r),n.id=e,E[e]=n,m(e),g(o)&&(n.isPinned=!0)}}function d(t){var e=t.id,n=E[e];n&&(E[e]=null,delete E[e],q.removeBody(n))}function h(t){m(t.fromId),m(t.toId);var e=E[t.fromId],n=E[t.toId],o=q.addSpring(e,n,t.length);M(t,o),T[t.id]=o}function y(e){var n=T[e.id];if(n){var o=t.getNode(e.fromId),r=t.getNode(e.toId);o&&m(o.id),r&&m(r.id),delete T[e.id],q.removeSpring(n)}}function v(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),o=0;o<n;++o){var r=t.links[o],i=r.fromId!==t.id?E[r.fromId]:E[r.toId];i&&i.pos&&e.push(i)}return e}function m(t){var e=E[t];e.mass=b(t)}function g(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function x(t){var e=E[t];return e||(l(t),e=E[t]),e}function b(e){var n=t.getLinks(e);return n?1+n.length/3:1}if(!t)throw new Error("Graph structure cannot be undefined");var w=n(8),q=w(e),E=Object.create(null),T={},k=0,M=q.settings.springTransform||r;p(),u();var P=!1,I={step:function(){if(0===k)return!0;var t=q.step();I.lastMove=t,I.fire("step");var e=t/k,n=e<=.01;return P!==n&&(P=n,f(n)),n},getNodePosition:function(t){return x(t).pos},setNodePosition:function(t){var e=x(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=T[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return q.getBBox()},forEachBody:o,pinNode:function(t,e){var n=x(t.id);n.isPinned=!!e},isNodePinned:function(t){return x(t.id).isPinned},dispose:function(){t.off("changed",c),I.fire("disposed")},getBody:a,getSpring:s,simulator:q,graph:t,lastMove:0};return i(I),I}function r(){}t.exports=o,t.exports.simulator=n(8);var i=n(7)},function(t,e,n){t.exports=function(t,e){function o(){var e=t.length;if(0!==e){for(var n=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MIN_VALUE,s=Number.MIN_VALUE;e--;){var a=t[e];a.isPinned?(a.pos.x=a.prevPos.x,a.pos.y=a.prevPos.y):(a.prevPos.x=a.pos.x,a.prevPos.y=a.pos.y),a.pos.x<n&&(n=a.pos.x),a.pos.x>r&&(r=a.pos.x),a.pos.y<o&&(o=a.pos.y),a.pos.y>s&&(s=a.pos.y)}i.x1=n,i.x2=r,i.y1=o,i.y2=s}}var r=n(6).random(42),i={x1:0,y1:0,x2:0,y2:0};return{box:i,update:o,reset:function(){i.x1=i.y1=0,i.x2=i.y2=0},getBestNewPosition:function(t){var n=i,o=0,s=0;if(t.length){for(var a=0;a<t.length;++a)o+=t[a].pos.x,s+=t[a].pos.y;o/=t.length,s/=t.length}else o=(n.x1+n.x2)/2,s=(n.y1+n.y2)/2;var u=e.springLength;return{x:o+r.next(u)-u/2,y:s+r.next(u)-u/2}}}}},function(t,e,n){var o=n(20);t.exports=function(t){return new o.Body(t)}},function(t,e,n){t.exports=function(t){var e=n(5),o=n(4);t=e(t,{dragCoeff:.02});var r={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return o(t,r,["dragCoeff"]),r}},function(t,e){function n(t,e){var n,o=0,r=0,i=0,s=0,a=t.length;if(0===a)return 0;for(n=0;n<a;++n){var u=t[n],f=e/u.mass;u.velocity.x+=f*u.force.x,u.velocity.y+=f*u.force.y;var c=u.velocity.x,p=u.velocity.y,l=Math.sqrt(c*c+p*p);l>1&&(u.velocity.x=c/l,u.velocity.y=p/l),o=e*u.velocity.x,i=e*u.velocity.y,u.pos.x+=o,u.pos.y+=i,r+=Math.abs(o),s+=Math.abs(i)}return(r*r+s*s)/a}t.exports=n},function(t,e){function n(t,e,n,o,r){this.from=t,this.to=e,this.length=n,this.coeff=o,this.weight="number"==typeof r?r:1}t.exports=n},function(t,e,n){t.exports=function(t){var e=n(5),o=n(6).random(42),r=n(4);t=e(t,{springCoeff:2e-4,springLength:80});var i={update:function(e){var n=e.from,r=e.to,i=e.length<0?t.springLength:e.length,s=r.pos.x-n.pos.x,a=r.pos.y-n.pos.y,u=Math.sqrt(s*s+a*a);0===u&&(s=(o.nextDouble()-.5)/50,a=(o.nextDouble()-.5)/50,u=Math.sqrt(s*s+a*a));var f=u-i,c=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*f/u*e.weight;n.force.x+=c*s,n.force.y+=c*a,r.force.x-=c*s,r.force.y-=c*a}};return r(t,i,["springCoeff","springLength"]),i}},function(t,e){function n(t,e){this.pos=new o(t,e),this.prevPos=new o(t,e),this.force=new o,this.velocity=new o,this.mass=1}function o(t,e){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0)}function r(t,e,n){this.pos=new i(t,e,n),this.prevPos=new i(t,e,n),this.force=new i,this.velocity=new i,this.mass=1}function i(t,e,n){t&&"number"!=typeof t?(this.x="number"==typeof t.x?t.x:0,this.y="number"==typeof t.y?t.y:0,this.z="number"==typeof t.z?t.z:0):(this.x="number"==typeof t?t:0,this.y="number"==typeof e?e:0,this.z="number"==typeof n?n:0)}t.exports={Body:n,Vector2d:o,Body3d:r,Vector3d:i},n.prototype.setPosition=function(t,e){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e},o.prototype.reset=function(){this.x=this.y=0},r.prototype.setPosition=function(t,e,n){this.prevPos.x=this.pos.x=t,this.prevPos.y=this.pos.y=e,this.prevPos.z=this.pos.z=n},i.prototype.reset=function(){this.x=this.y=this.z=0}},function(t,e,n){function o(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function r(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}t.exports=function(t){function e(){var t=v[m];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new f,v[m]=t),++m,t}function i(t){var e,n,o,r,i=d,s=0,a=0,f=1,c=0,p=1;for(i[0]=g;f;){var h=i[c],v=h.body;f-=1,c+=1;var m=v!==t;v&&m?(n=v.pos.x-t.pos.x,o=v.pos.y-t.pos.y,r=Math.sqrt(n*n+o*o),0===r&&(n=(u.nextDouble()-.5)/50,o=(u.nextDouble()-.5)/50,r=Math.sqrt(n*n+o*o)),e=l*v.mass*t.mass/(r*r*r),s+=e*n,a+=e*o):m&&(n=h.massX/h.mass-t.pos.x,o=h.massY/h.mass-t.pos.y,r=Math.sqrt(n*n+o*o),0===r&&(n=(u.nextDouble()-.5)/50,o=(u.nextDouble()-.5)/50,r=Math.sqrt(n*n+o*o)),(h.right-h.left)/r<y?(e=l*h.mass*t.mass/(r*r*r),s+=e*n,a+=e*o):(h.quad0&&(i[p]=h.quad0,f+=1,p+=1),h.quad1&&(i[p]=h.quad1,f+=1,p+=1),h.quad2&&(i[p]=h.quad2,f+=1,p+=1),h.quad3&&(i[p]=h.quad3,f+=1,p+=1)))}t.force.x+=s,t.force.y+=a}function s(t){var n,o=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,s=Number.MIN_VALUE,u=t.length;for(n=u;n--;){var f=t[n].pos.x,c=t[n].pos.y;f<o&&(o=f),f>i&&(i=f),c<r&&(r=c),c>s&&(s=c)}var p=i-o,l=s-r;for(p>l?s=r+p:i=o+l,m=0,g=e(),g.left=o,g.right=i,g.top=r,g.bottom=s,n=u-1,n>=0&&(g.body=t[n]);n--;)a(t[n],g)}function a(t){for(h.reset(),h.push(g,t);!h.isEmpty();){var n=h.pop(),i=n.node,s=n.body;if(i.body){var a=i.body;if(i.body=null,p(a.pos,s.pos)){var f=3;do{var c=u.nextDouble(),l=(i.right-i.left)*c,d=(i.bottom-i.top)*c;a.pos.x=i.left+l,a.pos.y=i.top+d,f-=1}while(f>0&&p(a.pos,s.pos));if(0===f&&p(a.pos,s.pos))return}h.push(i,a),h.push(i,s)}else{var y=s.pos.x,v=s.pos.y;i.mass=i.mass+s.mass,i.massX=i.massX+s.mass*y,i.massY=i.massY+s.mass*v;var m=0,x=i.left,b=(i.right+x)/2,w=i.top,q=(i.bottom+w)/2;y>b&&(m+=1,x=b,b=i.right),v>q&&(m+=2,w=q,q=i.bottom);var E=o(i,m);E?h.push(E,s):(E=e(),E.left=x,E.top=w,E.right=b,E.bottom=q,E.body=s,r(i,m,E))}}}t=t||{},t.gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var u=n(6).random(1984),f=n(24),c=n(22),p=n(23),l=t.gravity,d=[],h=new c,y=t.theta,v=[],m=0,g=e();return{insertBodies:s,getRoot:function(){return g},updateBodyForce:i,options:function(t){return t?("number"==typeof t.gravity&&(l=t.gravity),"number"==typeof t.theta&&(y=t.theta),this):{gravity:l,theta:y}}}}},function(t,e){function n(){this.stack=[],this.popIdx=0}function o(t,e){this.node=t,this.body=e}t.exports=n,n.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new o(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},function(t,e){t.exports=function(t,e){var n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return n<1e-8&&o<1e-8}},function(t,e){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(t,e,n){function o(t,e){var i=n(1);return e=i(e,{createQuadTree:n(43),createBounds:n(26),createDragForce:n(28),createSpringForce:n(30),integrator:r(e),createBody:n(27)}),o.get2dLayout(t,e)}function r(t){return n(t&&"verlet"===t.integrator?31:29)}t.exports=o,o.get2dLayout=n(32)},function(t,e,n){t.exports=function(t,e){function o(){var e=t.length;if(0!==e){for(var n=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MAX_VALUE,s=Number.MIN_VALUE,a=Number.MIN_VALUE,u=Number.MIN_VALUE;e--;){var f=t[e];f.isPinned?(f.pos.x=f.prevPos.x,f.pos.y=f.prevPos.y,f.pos.z=f.prevPos.z):(f.prevPos.x=f.pos.x,f.prevPos.y=f.pos.y,f.prevPos.z=f.pos.z),f.pos.x<n&&(n=f.pos.x),f.pos.x>s&&(s=f.pos.x),f.pos.y<o&&(o=f.pos.y),f.pos.y>a&&(a=f.pos.y),f.pos.z<r&&(r=f.pos.z),f.pos.z>u&&(u=f.pos.z)}i.x1=n,i.x2=s,i.y1=o,i.y2=a,i.z1=r,i.z2=u}}var r=n(2).random(42),i={x1:0,y1:0,z1:0,x2:0,y2:0,z2:0};return{box:i,update:o,reset:function(){i.x1=i.y1=0,i.x2=i.y2=0,i.z1=i.z2=0},getBestNewPosition:function(t){var n=i,o=0,s=0,a=0;if(t.length){for(var u=0;u<t.length;++u)o+=t[u].pos.x,s+=t[u].pos.y,a+=t[u].pos.z;o/=t.length,s/=t.length,a/=t.length}else o=(n.x1+n.x2)/2,s=(n.y1+n.y2)/2,a=(n.z1+n.z2)/2;var f=e.springLength;return{x:o+r.next(f)-f/2,y:s+r.next(f)-f/2,z:a+r.next(f)-f/2}}}}},function(t,e,n){var o=n(11);t.exports=function(t){return new o.Body3d(t)}},function(t,e,n){t.exports=function(t){var e=n(1),o=n(3);t=e(t,{dragCoeff:.02});var r={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y,e.force.z-=t.dragCoeff*e.velocity.z}};return o(t,r,["dragCoeff"]),r}},function(t,e){function n(t,e){var n,o=0,r=0,i=0,s=0,a=0,u=0,f=t.length;for(n=0;n<f;++n){var c=t[n],p=e/c.mass;c.velocity.x+=p*c.force.x,c.velocity.y+=p*c.force.y,c.velocity.z+=p*c.force.z;var l=c.velocity.x,d=c.velocity.y,h=c.velocity.z,y=Math.sqrt(l*l+d*d+h*h);y>1&&(c.velocity.x=l/y,c.velocity.y=d/y,c.velocity.z=h/y),o=e*c.velocity.x,i=e*c.velocity.y,a=e*c.velocity.z,c.pos.x+=o,c.pos.y+=i,c.pos.z+=a,r+=Math.abs(o),s+=Math.abs(i),u+=Math.abs(a)}return(r*r+s*s+u*u)/t.length}t.exports=n},function(t,e,n){t.exports=function(t){var e=n(1),o=n(2).random(42),r=n(3);t=e(t,{springCoeff:2e-4,springLength:80});var i={update:function(e){var n=e.from,r=e.to,i=e.length<0?t.springLength:e.length,s=r.pos.x-n.pos.x,a=r.pos.y-n.pos.y,u=r.pos.z-n.pos.z,f=Math.sqrt(s*s+a*a+u*u);0===f&&(s=(o.nextDouble()-.5)/50,a=(o.nextDouble()-.5)/50,u=(o.nextDouble()-.5)/50,f=Math.sqrt(s*s+a*a+u*u));var c=f-i,p=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*c/f*e.weight;n.force.x+=p*s,n.force.y+=p*a,n.force.z+=p*u,r.force.x-=p*s,r.force.y-=p*a,r.force.z-=p*u}};return r(t,i,["springCoeff","springLength"]),i}},function(t,e){function n(t,e){var n,o=0,r=0,i=0,s=t.length;for(n=0;n<s;++n){var a=t[n],u=e*e/a.mass;a.pos.x=2*a.pos.x-a.prevPos.x+a.force.x*u,a.pos.y=2*a.pos.y-a.prevPos.y+a.force.y*u,a.pos.z=2*a.pos.z-a.prevPos.z+a.force.z*u,o+=Math.abs(a.pos.x-a.prevPos.x),r+=Math.abs(a.pos.y-a.prevPos.y),i+=Math.abs(a.pos.z-a.prevPos.z)}return(o*o+r*r+i*i)/t.length}t.exports=n},function(t,e,n){function o(t,e){function o(e,n){var o;if(void 0===n)o="object"!=typeof e?e:e.id;else{var r=t.hasLink(e,n);if(!r)return;o=r.id}return E[o]}function s(t){return q[t]}function a(){t.on("changed",f),w.on("stable",u)}function u(t){k.fire("stable",t)}function f(t){for(var e=0;e<t.length;++e){var n=t[e];"add"===n.changeType?(n.node&&p(n.node.id),n.link&&d(n.link)):"remove"===n.changeType&&(n.node&&l(n.node),n.link&&h(n.link))}}function c(){t.forEachNode(function(t){p(t.id)}),t.forEachLink(d)}function p(e){var n=q[e];if(!n){var o=t.getNode(e);if(!o)throw new Error("initBody() was called with unknown node id");var r=o.position;if(!r){var i=y(o);r=w.getBestNewBodyPosition(i)}n=w.addBodyAt(r),q[e]=n,v(e),m(o)&&(n.isPinned=!0)}}function l(t){var e=t.id,n=q[e];n&&(q[e]=null,delete q[e],w.removeBody(n))}function d(t){v(t.fromId),v(t.toId);var e=q[t.fromId],n=q[t.toId],o=w.addSpring(e,n,t.length);T(t,o),E[t.id]=o}function h(e){var n=E[e.id];if(n){var o=t.getNode(e.fromId),r=t.getNode(e.toId);o&&v(o.id),r&&v(r.id),delete E[e.id],w.removeSpring(n)}}function y(t){var e=[];if(!t.links)return e;for(var n=Math.min(t.links.length,2),o=0;o<n;++o){var r=t.links[o],i=r.fromId!==t.id?q[r.fromId]:q[r.toId];i&&i.pos&&e.push(i)}return e}function v(t){var e=q[t];e.mass=x(t)}function m(t){return t&&(t.isPinned||t.data&&t.data.isPinned)}function g(t){var e=q[t];return e||(p(t),e=q[t]),e}function x(e){var n=t.getLinks(e);return n?1+n.length/3:1}if(!t)throw new Error("Graph structure cannot be undefined");var b=n(10),w=b(e),q="function"==typeof Object.create?Object.create(null):{},E={},T=w.settings.springTransform||r;c(),a();var k={step:function(){return w.step()},getNodePosition:function(t){return g(t).pos},setNodePosition:function(t){var e=g(t);e.setPosition.apply(e,Array.prototype.slice.call(arguments,1))},getLinkPosition:function(t){var e=E[t];if(e)return{from:e.from.pos,to:e.to.pos}},getGraphRect:function(){return w.getBBox()},pinNode:function(t,e){var n=g(t.id);n.isPinned=!!e},isNodePinned:function(t){return g(t.id).isPinned},dispose:function(){t.off("changed",f),w.off("stable",u)},getBody:s,getSpring:o,simulator:w};return i(k),k}function r(){}t.exports=o,t.exports.simulator=n(10);var i=n(9)},function(t,e,n){t.exports=function(t,e){function o(){var e=t.length;if(0!==e){for(var n=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MIN_VALUE,s=Number.MIN_VALUE;e--;){var a=t[e];a.isPinned?(a.pos.x=a.prevPos.x,a.pos.y=a.prevPos.y):(a.prevPos.x=a.pos.x,a.prevPos.y=a.pos.y),a.pos.x<n&&(n=a.pos.x),a.pos.x>r&&(r=a.pos.x),a.pos.y<o&&(o=a.pos.y),a.pos.y>s&&(s=a.pos.y)}i.x1=n,i.x2=r,i.y1=o,i.y2=s}}var r=n(2).random(42),i={x1:0,y1:0,x2:0,y2:0};return{box:i,update:o,reset:function(){i.x1=i.y1=0,i.x2=i.y2=0},getBestNewPosition:function(t){var n=i,o=0,s=0;if(t.length){for(var a=0;a<t.length;++a)o+=t[a].pos.x,s+=t[a].pos.y;o/=t.length,s/=t.length}else o=(n.x1+n.x2)/2,s=(n.y1+n.y2)/2;var u=e.springLength;return{x:o+r.next(u)-u/2,y:s+r.next(u)-u/2}}}}},function(t,e,n){var o=n(11);t.exports=function(t){return new o.Body(t)}},function(t,e,n){t.exports=function(t){var e=n(1),o=n(3);t=e(t,{dragCoeff:.02});var r={update:function(e){e.force.x-=t.dragCoeff*e.velocity.x,e.force.y-=t.dragCoeff*e.velocity.y}};return o(t,r,["dragCoeff"]),r}},function(t,e){function n(t,e){var n,o=0,r=0,i=0,s=0,a=t.length;if(0===a)return 0;for(n=0;n<a;++n){var u=t[n],f=e/u.mass;u.velocity.x+=f*u.force.x,u.velocity.y+=f*u.force.y;var c=u.velocity.x,p=u.velocity.y,l=Math.sqrt(c*c+p*p);l>1&&(u.velocity.x=c/l,u.velocity.y=p/l),o=e*u.velocity.x,i=e*u.velocity.y,u.pos.x+=o,u.pos.y+=i,r+=Math.abs(o),s+=Math.abs(i)}return(r*r+s*s)/a}t.exports=n},function(t,e){function n(t,e,n,o,r){this.from=t,this.to=e,this.length=n,this.coeff=o,this.weight="number"==typeof r?r:1}t.exports=n},function(t,e,n){t.exports=function(t){var e=n(1),o=n(2).random(42),r=n(3);t=e(t,{springCoeff:2e-4,springLength:80});var i={update:function(e){var n=e.from,r=e.to,i=e.length<0?t.springLength:e.length,s=r.pos.x-n.pos.x,a=r.pos.y-n.pos.y,u=Math.sqrt(s*s+a*a);0===u&&(s=(o.nextDouble()-.5)/50,a=(o.nextDouble()-.5)/50,u=Math.sqrt(s*s+a*a));var f=u-i,c=(!e.coeff||e.coeff<0?t.springCoeff:e.coeff)*f/u*e.weight;n.force.x+=c*s,n.force.y+=c*a,r.force.x-=c*s,r.force.y-=c*a}};return r(t,i,["springCoeff","springLength"]),i}},function(t,e,n){function o(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:null}function r(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e&&(t.quad3=n)}t.exports=function(t){t=t||{},t.gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=n(2).random(1984),i=n(42),s=n(40),a=n(41),u=t.gravity,f=[],c=new s,p=t.theta,l=[],d=0,h=function(){var t=l[d];return t?(t.quad0=null,t.quad1=null,t.quad2=null,t.quad3=null,t.body=null,t.mass=t.massX=t.massY=0,t.left=t.right=t.top=t.bottom=0):(t=new i,l[d]=t),++d,t},y=h(),v=function(t){for(c.reset(),c.push(y,t);!c.isEmpty();){var n=c.pop(),i=n.node,s=n.body;if(i.body){var u=i.body;if(i.body=null,a(u.pos,s.pos)){var f=3;do{var p=e.nextDouble(),l=(i.right-i.left)*p,d=(i.bottom-i.top)*p;u.pos.x=i.left+l,u.pos.y=i.top+d,f-=1}while(f>0&&a(u.pos,s.pos));if(0===f&&a(u.pos,s.pos))return}c.push(i,u),c.push(i,s)}else{var v=s.pos.x,m=s.pos.y;i.mass=i.mass+s.mass,i.massX=i.massX+s.mass*v,i.massY=i.massY+s.mass*m;var g=0,x=i.left,b=(i.right+x)/2,w=i.top,q=(i.bottom+w)/2;if(v>b){g+=1;var E=x;x=b,b+=b-E}if(m>q){g+=2;var T=w;w=q,q+=q-T}var k=o(i,g);k?c.push(k,s):(k=h(),k.left=x,k.top=w,k.right=b,k.bottom=q,k.body=s,r(i,g,k))}}},m=function(t){var n,o,r,i,s=f,a=0,c=0,l=1,d=0,h=1;for(s[0]=y;l;){var v=s[d],m=v.body;l-=1,d+=1;var g=m!==t;m&&g?(o=m.pos.x-t.pos.x,r=m.pos.y-t.pos.y,i=Math.sqrt(o*o+r*r),0===i&&(o=(e.nextDouble()-.5)/50,r=(e.nextDouble()-.5)/50,i=Math.sqrt(o*o+r*r)),n=u*m.mass*t.mass/(i*i*i),a+=n*o,c+=n*r):g&&(o=v.massX/v.mass-t.pos.x,r=v.massY/v.mass-t.pos.y,
i=Math.sqrt(o*o+r*r),0===i&&(o=(e.nextDouble()-.5)/50,r=(e.nextDouble()-.5)/50,i=Math.sqrt(o*o+r*r)),(v.right-v.left)/i<p?(n=u*v.mass*t.mass/(i*i*i),a+=n*o,c+=n*r):(v.quad0&&(s[h]=v.quad0,l+=1,h+=1),v.quad1&&(s[h]=v.quad1,l+=1,h+=1),v.quad2&&(s[h]=v.quad2,l+=1,h+=1),v.quad3&&(s[h]=v.quad3,l+=1,h+=1)))}t.force.x+=a,t.force.y+=c},g=function(t){var e,n=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MIN_VALUE,i=Number.MIN_VALUE,s=t.length;for(e=s;e--;){var a=t[e].pos.x,u=t[e].pos.y;a<n&&(n=a),a>r&&(r=a),u<o&&(o=u),u>i&&(i=u)}var f=r-n,c=i-o;for(f>c?i=o+f:r=n+c,d=0,y=h(),y.left=n,y.right=r,y.top=o,y.bottom=i,e=s-1,e>0&&(y.body=t[e]);e--;)v(t[e],y)};return{insertBodies:g,updateBodyForce:m,options:function(t){return t?("number"==typeof t.gravity&&(u=t.gravity),"number"==typeof t.theta&&(p=t.theta),this):{gravity:u,theta:p}}}}},function(t,e){function n(){this.stack=[],this.popIdx=0}function o(t,e){this.node=t,this.body=e}t.exports=n,n.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new o(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},function(t,e){t.exports=function(t,e){var n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y);return n<1e-8&&o<1e-8}},function(t,e){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.mass=0,this.massX=0,this.massY=0,this.left=0,this.top=0,this.bottom=0,this.right=0}},function(t,e,n){function o(t,e){return 0===e?t.quad0:1===e?t.quad1:2===e?t.quad2:3===e?t.quad3:4===e?t.quad4:5===e?t.quad5:6===e?t.quad6:7===e?t.quad7:null}function r(t,e,n){0===e?t.quad0=n:1===e?t.quad1=n:2===e?t.quad2=n:3===e?t.quad3=n:4===e?t.quad4=n:5===e?t.quad5=n:6===e?t.quad6=n:7===e&&(t.quad7=n)}t.exports=function(t){t=t||{},t.gravity="number"==typeof t.gravity?t.gravity:-1,t.theta="number"==typeof t.theta?t.theta:.8;var e=n(2).random(1984),i=n(46),s=n(44),a=n(45),u=t.gravity,f=[],c=new s,p=t.theta,l=[],d=0,h=function(){var t=l[d];return t?(t.quad0=null,t.quad4=null,t.quad1=null,t.quad5=null,t.quad2=null,t.quad6=null,t.quad3=null,t.quad7=null,t.body=null,t.mass=t.massX=t.massY=t.massZ=0,t.left=t.right=t.top=t.bottom=t.front=t.back=0):(t=new i,l[d]=t),++d,t},y=h(),v=function(t){for(c.reset(),c.push(y,t);!c.isEmpty();){var n=c.pop(),i=n.node,s=n.body;if(i.body){var u=i.body;if(i.body=null,a(u.pos,s.pos)){var f=3;do{var p=e.nextDouble(),l=(i.right-i.left)*p,d=(i.bottom-i.top)*p,v=(i.front-i.back)*p;u.pos.x=i.left+l,u.pos.y=i.top+d,u.pos.z=i.back+v,f-=1}while(f>0&&a(u.pos,s.pos));if(0===f&&a(u.pos,s.pos))return}c.push(i,u),c.push(i,s)}else{var m=s.pos.x,g=s.pos.y,x=s.pos.z;i.mass+=s.mass,i.massX+=s.mass*m,i.massY+=s.mass*g,i.massZ+=s.mass*x;var b=0,w=i.left,q=(i.right+w)/2,E=i.top,T=(i.bottom+E)/2,k=i.back,M=(i.front+k)/2;if(m>q){b+=1;var P=w;w=q,q+=q-P}if(g>T){b+=2;var I=E;E=T,T+=T-I}if(x>M){b+=4;var L=k;k=M,M=k+(k-L)}var N=o(i,b);N?c.push(N,s):(N=h(),N.left=w,N.top=E,N.right=q,N.bottom=T,N.back=k,N.front=M,N.body=s,r(i,b,N))}}},m=function(t){var n,o,r,i,s,a=f,c=0,l=0,d=0,h=1,v=0,m=1;for(a[0]=y;h;){var g=a[v],x=g.body;h-=1,v+=1;var b=x!==t;x&&b?(o=x.pos.x-t.pos.x,r=x.pos.y-t.pos.y,i=x.pos.z-t.pos.z,s=Math.sqrt(o*o+r*r+i*i),0===s&&(o=(e.nextDouble()-.5)/50,r=(e.nextDouble()-.5)/50,i=(e.nextDouble()-.5)/50,s=Math.sqrt(o*o+r*r+i*i)),n=u*x.mass*t.mass/(s*s*s),c+=n*o,l+=n*r,d+=n*i):b&&(o=g.massX/g.mass-t.pos.x,r=g.massY/g.mass-t.pos.y,i=g.massZ/g.mass-t.pos.z,s=Math.sqrt(o*o+r*r+i*i),0===s&&(o=(e.nextDouble()-.5)/50,r=(e.nextDouble()-.5)/50,i=(e.nextDouble()-.5)/50,s=Math.sqrt(o*o+r*r+i*i)),(g.right-g.left)/s<p?(n=u*g.mass*t.mass/(s*s*s),c+=n*o,l+=n*r,d+=n*i):(g.quad0&&(a[m]=g.quad0,h+=1,m+=1),g.quad1&&(a[m]=g.quad1,h+=1,m+=1),g.quad2&&(a[m]=g.quad2,h+=1,m+=1),g.quad3&&(a[m]=g.quad3,h+=1,m+=1),g.quad4&&(a[m]=g.quad4,h+=1,m+=1),g.quad5&&(a[m]=g.quad5,h+=1,m+=1),g.quad6&&(a[m]=g.quad6,h+=1,m+=1),g.quad7&&(a[m]=g.quad7,h+=1,m+=1)))}t.force.x+=c,t.force.y+=l,t.force.z+=d},g=function(t){var e,n=Number.MAX_VALUE,o=Number.MAX_VALUE,r=Number.MAX_VALUE,i=Number.MIN_VALUE,s=Number.MIN_VALUE,a=Number.MIN_VALUE,u=t.length;for(e=u;e--;){var f=t[e].pos,c=f.x,p=f.y,l=f.z;c<n&&(n=c),c>i&&(i=c),p<o&&(o=p),p>s&&(s=p),l<r&&(r=l),l>a&&(a=l)}var m=Math.max(i-n,Math.max(s-o,a-r));for(i=n+m,s=o+m,a=r+m,d=0,y=h(),y.left=n,y.right=i,y.top=o,y.bottom=s,y.back=r,y.front=a,e=u-1,e>0&&(y.body=t[e]);e--;)v(t[e],y)};return{insertBodies:g,updateBodyForce:m,options:function(t){return t?("number"==typeof t.gravity&&(u=t.gravity),"number"==typeof t.theta&&(p=t.theta),this):{gravity:u,theta:p}}}}},function(t,e){function n(){this.stack=[],this.popIdx=0}function o(t,e){this.node=t,this.body=e}t.exports=n,n.prototype={isEmpty:function(){return 0===this.popIdx},push:function(t,e){var n=this.stack[this.popIdx];n?(n.node=t,n.body=e):this.stack[this.popIdx]=new o(t,e),++this.popIdx},pop:function(){if(this.popIdx>0)return this.stack[--this.popIdx]},reset:function(){this.popIdx=0}}},function(t,e){t.exports=function(t,e){var n=Math.abs(t.x-e.x),o=Math.abs(t.y-e.y),r=Math.abs(t.z-e.z);return n<1e-8&&o<1e-8&&r<1e-8}},function(t,e){t.exports=function(){this.body=null,this.quad0=null,this.quad1=null,this.quad2=null,this.quad3=null,this.quad4=null,this.quad5=null,this.quad6=null,this.quad7=null,this.mass=0,this.massX=0,this.massY=0,this.massZ=0,this.left=0,this.top=0,this.bottom=0,this.right=0,this.front=0,this.back=0}},function(t,e,n){function o(t){function e(){function t(){return X.beginUpdate=F=k,X.endUpdate=U=M,_=n,S=o,X.on=e,e.apply(X,arguments)}var e=X.on;X.on=t}function n(t,e){D.push({link:t,changeType:e})}function o(t,e){D.push({node:t,changeType:e})}function u(t,e){if(void 0===t)throw new Error("Invalid node identifier");F();var n=p(t);return n?S(n,"update"):(n=new i(t),j++,S(n,"add")),n.data=e,N[t]=n,U(),n}function p(t){return N[t]}function l(t){var e=p(t);if(!e)return!1;if(F(),e.links)for(;e.links.length;){var n=e.links[0];m(n)}return delete N[t],j--,S(e,"remove"),U(),!0}function d(t,e,n){F();var o=p(t)||u(t),r=p(e)||u(e),i=O(t,e,n);return A.push(i),s(o,i),t!==e&&s(r,i),_(i,"add"),U(),i}function h(t,e,n){var o=f(t,e);return new a(t,e,n,o)}function y(t,e,n){var o=f(t,e),r=B.hasOwnProperty(o);if(r||g(t,e)){r||(B[o]=0);var i="@"+ ++B[o];o=f(t+i,e+i)}return new a(t,e,n,o)}function v(t){var e=p(t);return e?e.links:null}function m(t){if(!t)return!1;var e=r(t,A);if(e<0)return!1;F(),A.splice(e,1);var n=p(t.fromId),o=p(t.toId);return n&&(e=r(t,n.links),e>=0&&n.links.splice(e,1)),o&&(e=r(t,o.links),e>=0&&o.links.splice(e,1)),_(t,"remove"),U(),!0}function g(t,e){var n,o=p(t);if(!o||!o.links)return null;for(n=0;n<o.links.length;++n){var r=o.links[n];if(r.fromId===t&&r.toId===e)return r}return null}function x(){F(),C(function(t){l(t.id)}),U()}function b(t){var e,n;if("function"==typeof t)for(e=0,n=A.length;e<n;++e)t(A[e])}function w(t,e,n){var o=p(t);if(o&&o.links&&"function"==typeof e)return n?E(o.links,t,e):q(o.links,t,e)}function q(t,e,n){for(var o,r=0;r<t.length;++r){var i=t[r],s=i.fromId===e?i.toId:i.fromId;if(o=n(N[s],i))return!0}}function E(t,e,n){for(var o,r=0;r<t.length;++r){var i=t[r];if(i.fromId===e&&(o=n(N[i.toId],i)))return!0}}function T(){}function k(){z+=1}function M(){z-=1,0===z&&D.length>0&&(X.fire("changed",D),D.length=0)}function P(){return Object.keys?I:L}function I(t){if("function"==typeof t)for(var e=Object.keys(N),n=0;n<e.length;++n)if(t(N[e[n]]))return!0}function L(t){if("function"==typeof t){var e;for(e in N)if(t(N[e]))return!0}}t=t||{},void 0===t.uniqueLinkId&&(t.uniqueLinkId=!0);var N="function"==typeof Object.create?Object.create(null):{},A=[],B={},j=0,z=0,C=P(),O=t.uniqueLinkId?y:h,D=[],_=T,S=T,F=T,U=T,X={addNode:u,addLink:d,removeLink:m,removeNode:l,getNode:p,getNodesCount:function(){return j},getLinksCount:function(){return A.length},getLinks:v,forEachNode:C,forEachLinkedNode:w,forEachLink:b,beginUpdate:F,endUpdate:U,clear:x,hasLink:g,getLink:g};return c(X),e(),X}function r(t,e){if(!e)return-1;if(e.indexOf)return e.indexOf(t);var n,o=e.length;for(n=0;n<o;n+=1)if(e[n]===t)return n;return-1}function i(t){this.id=t,this.links=null,this.data=null}function s(t,e){t.links?t.links.push(e):t.links=[e]}function a(t,e,n,o){this.fromId=t,this.toId=e,this.data=n,this.id=o}function u(t){var e,n,o,r=0;if(0==t.length)return r;for(e=0,o=t.length;e<o;e++)n=t.charCodeAt(e),r=(r<<5)-r+n,r|=0;return r}function f(t,e){return u(t.toString()+"👉 "+e.toString())}t.exports=o;var c=n(48)},function(t,e){function n(t){var e=Object.create(null);return{on:function(n,o,r){if("function"!=typeof o)throw new Error("callback is expected to be a function");var i=e[n];return i||(i=e[n]=[]),i.push({callback:o,ctx:r}),t},off:function(n,o){var r="undefined"==typeof n;if(r)return e=Object.create(null),t;if(e[n]){var i="function"!=typeof o;if(i)delete e[n];else for(var s=e[n],a=0;a<s.length;++a)s[a].callback===o&&s.splice(a,1)}return t},fire:function(n){var o=e[n];if(!o)return t;var r;arguments.length>1&&(r=Array.prototype.splice.call(arguments,1));for(var i=0;i<o.length;++i){var s=o[i];s.callback.apply(s.ctx,r)}return t}}}function o(t){if(!t)throw new Error("Eventify cannot use falsy object as events subject");for(var e=["on","fire","off"],n=0;n<e.length;++n)if(t.hasOwnProperty(e[n]))throw new Error("Subject cannot be eventified, since it already has property '"+e[n]+"'")}t.exports=function(t){o(t);var e=n(t);return t.on=e.on,t.off=e.off,t.fire=e.fire,t}},function(t,e,n){var o,r;/**
	 * @preserve jquery-param (c) 2015 KNOWLEDGECODE | MIT
	 */
!function(n){"use strict";var i=function(t){var e=function(t,e,n){n="function"==typeof n?n():null===n?"":void 0===n?"":n,t[t.length]=encodeURIComponent(e)+"="+encodeURIComponent(n)},n=function(t,o,r){var i,s,a;if("[object Array]"===Object.prototype.toString.call(o))for(i=0,s=o.length;i<s;i++)n(t+"["+("object"==typeof o[i]?i:"")+"]",o[i],r);else if(o&&"[object Object]"===o.toString())for(a in o)o.hasOwnProperty(a)&&(t?n(t+"["+a+"]",o[a],r,e):n(a,o[a],r,e));else if(t)e(r,t,o);else for(a in o)e(r,a,o[a]);return r};return n("",t,[]).join("&").replace(/%20/g,"+")};"object"==typeof t&&"object"==typeof t.exports?t.exports=i:(o=[],r=function(){return i}.apply(e,o),!(void 0!==r&&(t.exports=r)))}(this)},function(t,e,n){(function(t,e,n){!function(t){function o(t){return"function"==typeof t}function r(t){return"object"==typeof t}function i(t){"undefined"!=typeof e?e(t):"undefined"!=typeof n&&n.nextTick?n.nextTick(t):setTimeout(t,0)}var s;t[0][t[1]]=function t(e){var n,a=[],u=[],f=function(t,e){return null==n&&null!=t&&(n=t,a=e,u.length&&i(function(){for(var t=0;t<u.length;t++)u[t]()})),n};return f.then=function(f,c){var p=t(e),l=function(){function t(e){var n,i=0;try{if(e&&(r(e)||o(e))&&o(n=e.then)){if(e===p)throw new TypeError;n.call(e,function(){i++||t.apply(s,arguments)},function(t){i++||p(!1,[t])})}else p(!0,arguments)}catch(t){i++||p(!1,[t])}}try{var e=n?f:c;o(e)?t(e.apply(s,a||[])):p(n,a)}catch(t){p(!1,[t])}};return null!=n?i(l):u.push(l),p},e&&(f=e(f)),f}}([t,"exports"])}).call(e,n(52)(t),n(53).setImmediate,n(12))},function(t,e,n){/*! qwest 4.4.5 (https://github.com/pyrsmk/qwest) */
t.exports=function(){var t="undefined"!=typeof window?window:self,e=n(50),o=n(49),r={},i="json",s="post",a=null,u=0,f=[],c=t.XMLHttpRequest?function(){return new t.XMLHttpRequest}:function(){return new ActiveXObject("Microsoft.XMLHTTP")},p=""===c().responseType,l=function(n,l,d,h,y){n=n.toUpperCase(),d=d||null,h=h||{};for(var v in r)if(!(v in h))if("object"==typeof r[v]&&"object"==typeof h[v])for(var m in r[v])h[v][m]=r[v][m];else h[v]=r[v];var g,x,b,w,q,E=!1,T=!1,k=!1,M=0,P={},I={text:"*/*",xml:"text/xml",json:"application/json",post:"application/x-www-form-urlencoded",document:"text/html"},L={text:"*/*",xml:"application/xml; q=1.0, text/xml; q=0.8, */*; q=0.1",json:"application/json; q=1.0, text/*; q=0.8, */*; q=0.1"},N=!1,A=e(function(e){return e.abort=function(){k||(x&&4!=x.readyState&&x.abort(),N&&(--u,N=!1),k=!0)},e.send=function(){if(!N){if(u==a)return void f.push(e);if(k)return void(f.length&&f.shift().send());if(++u,N=!0,x=c(),g&&("withCredentials"in x||!t.XDomainRequest||(x=new XDomainRequest,T=!0,"GET"!=n&&"POST"!=n&&(n="POST"))),T?x.open(n,l):(x.open(n,l,h.async,h.user,h.password),p&&h.async&&(x.withCredentials=h.withCredentials)),!T)for(var o in P)P[o]&&x.setRequestHeader(o,P[o]);if(p&&"auto"!=h.responseType)try{x.responseType=h.responseType,E=x.responseType==h.responseType}catch(t){}p||T?(x.onload=B,x.onerror=j,T&&(x.onprogress=function(){})):x.onreadystatechange=function(){4==x.readyState&&B()},h.async?"timeout"in x?(x.timeout=h.timeout,x.ontimeout=z):b=setTimeout(z,h.timeout):T&&(x.ontimeout=function(){}),"auto"!=h.responseType&&"overrideMimeType"in x&&x.overrideMimeType(I[h.responseType]),y&&y(x),T?setTimeout(function(){x.send("GET"!=n?d:null)},0):x.send("GET"!=n?d:null)}},e}),B=function(){var e;if(N=!1,clearTimeout(b),f.length&&f.shift().send(),!k){--u;try{if(E){if("response"in x&&null===x.response)throw"The request response is empty";q=x.response}else{if(e=h.responseType,"auto"==e)if(T)e=i;else{var n=x.getResponseHeader("Content-Type")||"";e=n.indexOf(I.json)>-1?"json":n.indexOf(I.xml)>-1?"xml":"text"}switch(e){case"json":if(x.responseText.length)try{q="JSON"in t?JSON.parse(x.responseText):new Function("return ("+x.responseText+")")()}catch(t){throw"Error while parsing JSON body : "+t}break;case"xml":try{t.DOMParser?q=(new DOMParser).parseFromString(x.responseText,"text/xml"):(q=new ActiveXObject("Microsoft.XMLDOM"),q.async="false",q.loadXML(x.responseText))}catch(t){q=void 0}if(!q||!q.documentElement||q.getElementsByTagName("parsererror").length)throw"Invalid XML";break;default:q=x.responseText}}if("status"in x&&!/^2|1223/.test(x.status))throw x.status+" ("+x.statusText+")";A(!0,[x,q])}catch(t){A(!1,[t,x,q])}}},j=function(t){k||(t="string"==typeof t?t:"Connection aborted",A.abort(),A(!1,[new Error(t),x,null]))},z=function(){k||(h.attempts&&++M==h.attempts?j("Timeout ("+l+")"):(x.abort(),N=!1,A.send()))};if(h.async=!("async"in h)||!!h.async,h.cache="cache"in h&&!!h.cache,h.dataType="dataType"in h?h.dataType.toLowerCase():s,h.responseType="responseType"in h?h.responseType.toLowerCase():"auto",h.user=h.user||"",h.password=h.password||"",h.withCredentials=!!h.withCredentials,h.timeout="timeout"in h?parseInt(h.timeout,10):3e4,h.attempts="attempts"in h?parseInt(h.attempts,10):1,w=l.match(/\/\/(.+?)\//),g=w&&!!w[1]&&w[1]!=location.host,"ArrayBuffer"in t&&d instanceof ArrayBuffer?h.dataType="arraybuffer":"Blob"in t&&d instanceof Blob?h.dataType="blob":"Document"in t&&d instanceof Document?h.dataType="document":"FormData"in t&&d instanceof FormData&&(h.dataType="formdata"),null!==d)switch(h.dataType){case"json":d=JSON.stringify(d);break;case"post":d=o(d)}if(h.headers){var C=function(t,e,n){return e+n.toUpperCase()};for(w in h.headers)P[w.replace(/(^|-)([^-])/g,C)]=h.headers[w]}return"Content-Type"in P||"GET"==n||h.dataType in I&&I[h.dataType]&&(P["Content-Type"]=I[h.dataType]),P.Accept||(P.Accept=h.responseType in L?L[h.responseType]:"*/*"),g||"X-Requested-With"in P||(P["X-Requested-With"]="XMLHttpRequest"),h.cache||"Cache-Control"in P||(P["Cache-Control"]="no-cache"),"GET"==n&&d&&"string"==typeof d&&(l+=(/\?/.test(l)?"&":"?")+d),h.async&&A.send(),A},d=function(t){var n=[],o=0,r=[];return e(function(e){var i=-1,s=function(t){return function(s,a,u,f){var c=++i;return++o,n.push(l(t,e.base+s,a,u,f).then(function(t,n){r[c]=arguments,--o||e(!0,1==r.length?r[0]:[r])},function(){e(!1,arguments)})),e}};e.get=s("GET"),e.post=s("POST"),e.put=s("PUT"),e.delete=s("DELETE"),e.catch=function(t){return e.then(null,t)},e.complete=function(t){var n=function(){t()};return e.then(n,n)},e.map=function(t,e,n,o,r){return s(t.toUpperCase()).call(this,e,n,o,r)};for(var a in t)a in e||(e[a]=t[a]);return e.send=function(){for(var t=0,o=n.length;t<o;++t)n[t].send();return e},e.abort=function(){for(var t=0,o=n.length;t<o;++t)n[t].abort();return e},e})},h={base:"",get:function(){return d(h).get.apply(this,arguments)},post:function(){return d(h).post.apply(this,arguments)},put:function(){return d(h).put.apply(this,arguments)},delete:function(){return d(h).delete.apply(this,arguments)},map:function(){return d(h).map.apply(this,arguments)},xhr2:p,limit:function(t){return a=t,h},setDefaultOptions:function(t){return r=t,h},setDefaultXdrResponseType:function(t){return i=t.toLowerCase(),h},setDefaultDataType:function(t){return s=t.toLowerCase(),h},getOpenRequests:function(){return u}};return h}()},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){function o(t,e){this._id=t,this._clearFn=e}var r=Function.prototype.apply;e.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(54),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function o(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var o={callback:t,args:e};return y[h]=o,d(h),h++}function r(t){delete y[t]}function i(t){var e=t.callback,o=t.args;switch(o.length){case 0:e();break;case 1:e(o[0]);break;case 2:e(o[0],o[1]);break;case 3:e(o[0],o[1],o[2]);break;default:e.apply(n,o)}}function s(t){if(v)setTimeout(s,0,t);else{var e=y[t];if(e){v=!0;try{i(e)}finally{r(t),v=!1}}}}function a(){d=function(t){e.nextTick(function(){s(t)})}}function u(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function f(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&s(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),d=function(n){t.postMessage(e+n,"*")}}function c(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;s(e)},d=function(e){t.port2.postMessage(e)}}function p(){var t=m.documentElement;d=function(e){var n=m.createElement("script");n.onreadystatechange=function(){s(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function l(){d=function(t){setTimeout(s,0,t)}}if(!t.setImmediate){var d,h=1,y={},v=!1,m=t.document,g=Object.getPrototypeOf&&Object.getPrototypeOf(t);g=g&&g.setTimeout?g:t,"[object process]"==={}.toString.call(t.process)?a():u()?f():t.MessageChannel?c():m&&"onreadystatechange"in m.createElement("script")?p():l(),g.setImmediate=o,g.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(12))}]);